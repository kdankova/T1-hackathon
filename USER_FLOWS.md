# User Flow Scenarios

## Сценарий 1: Базовый поиск ответа оператором

**Актёр:** Оператор службы поддержки  
**Цель:** Быстро найти ответ на вопрос клиента  
**Время выполнения:** ~10 секунд

### Шаги:
1. Клиент звонит и спрашивает: "Как оформить карту MORE?"
2. Оператор открывает Operator UI
3. Вводит вопрос в поле поиска: "как оформить карту MORE"
4. Нажимает кнопку "Поиск"
5. Система возвращает релевантный ответ с категорией и аудиторией
6. Оператор зачитывает ответ клиенту
7. Клиент удовлетворён, звонок завершён

**Результат:** Клиент получил точный ответ за 10 секунд вместо 2-3 минут поиска в документации.

---

## Сценарий 2: Исправление неточного ответа

**Актёр:** Оператор службы поддержки  
**Цель:** Отправить исправление неточного ответа на модерацию  
**Время выполнения:** ~30 секунд

### Шаги:
1. Клиент спрашивает: "Какие документы нужны для ипотеки?"
2. Оператор вводит вопрос в поиск
3. Система возвращает ответ, но оператор замечает что ответ устаревший
4. Оператор прокручивает вниз до формы "Пожаловаться на ответ"
5. Видит старый ответ в поле для сравнения
6. Вводит актуальный правильный ответ в поле "Правильный ответ"
7. Нажимает "Отправить на модерацию"
8. Видит сообщение "Жалоба отправлена на модерацию"
9. Тем временем отвечает клиенту правильный вариант из другого источника
10. Звонок завершён

**Результат:** Неточность в базе знаний зафиксирована и отправлена на проверку. База будет улучшена.

---

## Сценарий 3: Модерация и принятие правки

**Актёр:** Модератор базы знаний  
**Цель:** Проверить и одобрить правильные исправления  
**Время выполнения:** ~1 минута на правку

### Шаги:
1. Модератор открывает Moderator UI
2. Видит в статистике "Ожидает модерации: 3"
3. Нажимает "Обновить список"
4. Видит список из 3 правок с развёрнутыми карточками
5. Читает первую правку:
   - Исходный вопрос: "Какие документы нужны для ипотеки?"
   - Старый ответ: [устаревший список документов]
   - Новый ответ: [актуальный список с дополнениями]
6. Модератор проверяет информацию в регламенте банка
7. Подтверждает что новый ответ корректен
8. Нажимает кнопку "Принять"
9. Видит сообщение "Изменения применены! База знаний обновлена"
10. Карточка исчезает из списка
11. Статистика обновляется: "Ожидает модерации: 2", "Принято: 1"
12. Повторяет процесс для остальных правок

**Результат:** База знаний обновлена в режиме реального времени. Следующий оператор получит правильный ответ.

---

## Сценарий 4: Отклонение некорректной правки

**Актёр:** Модератор базы знаний  
**Цель:** Отклонить неверное исправление  
**Время выполнения:** ~20 секунд

### Шаги:
1. Модератор видит правку в списке
2. Читает предложенный новый ответ
3. Замечает что оператор допустил фактическую ошибку
4. Проверяет в регламенте - подтверждает что правка неверна
5. Нажимает кнопку "Отклонить"
6. Видит сообщение "Правка отклонена"
7. Правка исчезает из списка, база знаний не изменена
8. Статистика обновляется: "Отклонено: +1"

**Результат:** База знаний защищена от внесения некорректной информации. Качество данных сохранено.

---

## Сценарий 5: Массовая модерация в конце дня

**Актёр:** Модератор базы знаний  
**Цель:** Обработать накопившиеся правки за день  
**Время выполнения:** ~15 минут (для 20 правок)

### Шаги:
1. Конец рабочего дня, модератор открывает Moderator UI
2. Видит статистику: "Ожидает модерации: 20"
3. Нажимает "Обновить список"
4. Видит 20 развёрнутых карточек с правками
5. Проходит по списку сверху вниз:
   - Читает вопрос
   - Сравнивает старый и новый ответы
   - Быстро проверяет корректность (опыт позволяет)
   - Принимает или отклоняет
6. Через 15 минут все правки обработаны
7. Финальная статистика:
   - Ожидает модерации: 0
   - Принято за день: +17
   - Отклонено за день: +3

**Результат:** База знаний обогатилась 17 новыми улучшениями за день. Качество ответов растёт непрерывно.

---

## Сценарий 6: Проверка эффекта от улучшения

**Актёр:** Оператор службы поддержки  
**Цель:** Использовать обновлённый ответ  
**Время выполнения:** ~10 секунд

### Шаги:
1. На следующий день клиент задаёт тот же вопрос: "Какие документы нужны для ипотеки?"
2. Оператор вводит вопрос в поиск
3. Система теперь возвращает обновлённый ответ (который был принят вчера)
4. Оператор видит актуальную информацию
5. Зачитывает клиенту правильный полный ответ
6. Клиент доволен, никаких дополнительных вопросов
7. Звонок завершён успешно

**Результат:** Оператор получил актуальную информацию автоматически. Клиент удовлетворён. Эффект от непрерывного обучения системы.

---

## Сценарий 7: API интеграция для внешних систем

**Актёр:** Разработчик интегратор  
**Цель:** Подключить RAG систему к чат-боту  
**Время выполнения:** ~1 час на интеграцию

### Шаги:
1. Разработчик открывает Swagger UI: `/docs`
2. Изучает эндпоинт `POST /api/search`
3. Видит пример запроса:
   ```json
   {
     "query": "Как оформить карту?",
     "top_k": 3
   }
   ```
4. Видит пример ответа с полями:
   - `draft` - готовый ответ
   - `category`, `subcategory` - классификация
   - `target_group` - целевая аудитория
   - `confidence` - уверенность
   - `metadata` - дополнительная информация
5. Копирует curl команду из Swagger
6. Тестирует в терминале - работает
7. Пишет интеграционный код на Python:
   ```python
   response = requests.post(
       "https://api.bank.com/api/search",
       json={"query": user_message, "top_k": 1}
   )
   answer = response.json()["draft"]
   ```
8. Встраивает в логику чат-бота
9. Деплоит
10. Чат-бот начинает отвечать на вопросы клиентов автоматически

**Результат:** RAG система интегрирована в чат-бот. 80% простых вопросов обрабатываются без участия операторов.

---

## Сценарий 8: Мониторинг качества через статистику

**Актёр:** Руководитель службы поддержки  
**Цель:** Отследить рост качества базы знаний  
**Время выполнения:** ~2 минуты

### Шаги:
1. Руководитель открывает Moderator UI
2. Смотрит на боковую панель со статистикой:
   - Ожидает модерации: 5
   - Принято: 247
   - Отклонено: 18
3. Делает выводы:
   - За время работы системы база улучшена 247 раз
   - Rejection rate: 18/(247+18) = 6.8% (низкий, операторы работают качественно)
   - Текущая очередь: 5 правок (нормально, модератор справляется)
4. Руководитель доволен метриками
5. Планирует дальнейшее масштабирование

**Результат:** Прозрачность процесса непрерывного улучшения. Данные для принятия управленческих решений.

---

## Метрики успеха

### До внедрения системы:
- Среднее время поиска ответа: 2-3 минуты
- Точность ответов: 75% (устаревшая документация)
- Нагрузка на супервизоров: высокая (эскалации)
- Обновление базы знаний: 1 раз в квартал (вручную)

### После внедрения системы:
- Среднее время поиска ответа: 10 секунд (↓ 95%)
- Точность ответов: 95% (постоянно улучшается)
- Нагрузка на супервизоров: низкая
- Обновление базы знаний: непрерывное (247+ правок за период)
- Автоматизация: 80% простых вопросов (через API)

### ROI показатели:
- Экономия времени оператора: 2.5 минуты × 1000 звонков/день = 42 часа/день
- Снижение эскалаций: ↓ 60%
- Улучшение CSAT: ↑ 15% (быстрые точные ответы)
- Стоимость внедрения: минимальная (SciBox API + CPU для индексов)

